{% extends "base.html" %}
{% block start %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<section class="position-relative py-6">
    <img class="bg-image" src="https://images.pexels.com/photos/1761279/pexels-photo-1761279.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" alt="">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <div class="bg-white rounded-lg shadow p-5"><strong class="text-uppercase text-secondary d-inline-block mb-2 text-sm">Featured</strong>
            <h2 class="mb-3">Escape the city today</h2>
            <p class="text-muted">As am hastily invited settled at limited civilly fortune me. Really spring in extent an by. Judge but built party world. Of so am he remember although required. Bachelor unpacked be advanced at. Confined in declared marianne is vicinity</p><a class="btn btn-link p-0" href="post.html">Continue reading <i class="fa fa-long-arrow-alt-right"></i></a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="py-6">
      <div class="container">
        <div class="row mb-5" id="blogContainer">

        </div>
    </div>
  </section>
  <!-- Footer-->

<script>
  $(document).ready(function() {
    // Retrieve the list of blogs from the server
    var token = localStorage.getItem('accessToken'); // Retrieve the token from local storage
    console.log(token)
    $.ajax({
      type: 'GET',
      url: '/blogs/api/blog-list-create/',
      beforeSend: function(xhr, settings) {
      xhr.setRequestHeader('Authorization', 'Bearer ' + token);}, // Include the token in the request headers
      success: function(response) {
        // Loop through the blogs and create Bootstrap cards
        for (var i = 0; i < response.length; i++) {
          var blog = response[i];
          var blogCard = `
            <div class="col-lg-4 col-sm-6 mb-4 hover-animate">
                <div class="card shadow border-0 h-100">
                  <a href="">
                    <img class="img-fluid card-img-top" src="${blog.image}" alt="..."/></a>
                  <div class="card-body"><a class="text-uppercase text-muted text-sm letter-spacing-2" href="#">
                    ${blog.user}</a>
                    <h5 class="my-2"><a class="text-dark" href="/">
                     ${blog.title}</a></h5>
                    <p class="text-gray-500 text-sm my-3"><i class="far fa-clock mr-2"></i>
                      ${blog.created_at}</p>
                    <a class="btn btn-link pl-0"href="">Read more<i class="fa fa-long-arrow-alt-right ml-2"></i></a>
                  </div>
                </div>
              </div>
          `;
          $('#blogContainer').append(blogCard); // Append the card to the container
        }
      },
      error: function(xhr, textStatus, error) {
        console.log(error);
      }
    });
  });
</script>


  {% endblock %}